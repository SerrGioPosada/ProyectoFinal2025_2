<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
      fx:controller="co.edu.uniquindio.poo.proyectofiinal2025_2.Controller.CreateShipmentController"
      spacing="20" styleClass="content-area" alignment="CENTER">

    <padding>
        <Insets top="20" right="40" bottom="20" left="40"/>
    </padding>

    <!-- Header Section -->
    <HBox alignment="CENTER_LEFT" spacing="15" styleClass="header-section">
        <Label text="Crear Nuevo Envío" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Crear Envío" styleClass="btn-primary" onAction="#handleCreateShipment"/>
        <Button text="Cancelar" styleClass="btn-secondary" onAction="#handleCancel"/>
    </HBox>

    <!-- Scrollable Content -->
    <ScrollPane fitToWidth="true" styleClass="details-scroll" VBox.vgrow="ALWAYS">
        <VBox spacing="20" styleClass="details-container" alignment="CENTER">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>

            <!-- Address Selection -->
            <VBox spacing="10" styleClass="detail-section" alignment="CENTER" maxWidth="700">
                <Label text="Direcciones" styleClass="section-title"/>
                <GridPane hgap="20" vgap="15" styleClass="detail-grid" alignment="CENTER">
                    <columnConstraints>
                        <ColumnConstraints minWidth="180" prefWidth="180" halignment="RIGHT"/>
                        <ColumnConstraints minWidth="400" prefWidth="400"/>
                    </columnConstraints>

                    <Label text="Dirección de Origen:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <ComboBox fx:id="cmbOrigin" styleClass="form-combo" prefWidth="400" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Dirección de Destino:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <ComboBox fx:id="cmbDestination" styleClass="form-combo" prefWidth="400" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Package Details -->
            <VBox spacing="10" styleClass="detail-section" alignment="CENTER" maxWidth="700">
                <Label text="Detalles del Paquete" styleClass="section-title"/>
                <GridPane hgap="20" vgap="10" styleClass="detail-grid">
                    <columnConstraints>
                        <ColumnConstraints minWidth="150" prefWidth="150"/>
                        <ColumnConstraints minWidth="120" prefWidth="120"/>
                        <ColumnConstraints minWidth="150" prefWidth="150"/>
                        <ColumnConstraints minWidth="120" prefWidth="120"/>
                    </columnConstraints>

                    <Label text="Peso (kg):" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <TextField fx:id="txtWeight" promptText="0.0" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Alto (cm):" styleClass="detail-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                    <TextField fx:id="txtHeight" promptText="0.0" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                    <Label text="Ancho (cm):" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <TextField fx:id="txtWidth" promptText="0.0" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Largo (cm):" styleClass="detail-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                    <TextField fx:id="txtLength" promptText="0.0" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                    <Label text="Volumen:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <Label fx:id="lblVolume" text="0.0 m&#179;" styleClass="detail-value" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Additional Services -->
            <VBox spacing="10" styleClass="detail-section" alignment="CENTER" maxWidth="700">
                <Label text="Servicios Adicionales" styleClass="section-title"/>
                <HBox spacing="30" alignment="CENTER">
                    <CheckBox fx:id="chkInsurance" text="Seguro" styleClass="form-checkbox"/>
                    <CheckBox fx:id="chkFragile" text="Frágil" styleClass="form-checkbox"/>
                    <CheckBox fx:id="chkSignature" text="Requiere Firma" styleClass="form-checkbox"/>
                    <CheckBox fx:id="chkPriority" text="Prioritario" styleClass="form-checkbox"/>
                </HBox>
            </VBox>

            <Separator/>

            <!-- Priority and Schedule -->
            <VBox spacing="10" styleClass="detail-section" alignment="CENTER" maxWidth="700">
                <Label text="Prioridad y Programación" styleClass="section-title"/>
                <GridPane hgap="20" vgap="15" styleClass="detail-grid" alignment="CENTER">
                    <columnConstraints>
                        <ColumnConstraints minWidth="180" prefWidth="180" halignment="RIGHT"/>
                        <ColumnConstraints minWidth="400" prefWidth="400"/>
                    </columnConstraints>

                    <Label text="Prioridad (1-5):" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <HBox spacing="15" alignment="CENTER_LEFT" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <Slider fx:id="sliderPriority" min="1" max="5" value="3" showTickLabels="true" showTickMarks="true"
                                majorTickUnit="1" minorTickCount="0" snapToTicks="true" prefWidth="300"
                                style="-fx-control-inner-background: #2196F3;"/>
                        <Label fx:id="lblPriorityValue" text="3" styleClass="detail-value" minWidth="30"
                               style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
                    </HBox>

                    <Label text="Fecha de Recogida:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <DatePicker fx:id="dpPickupDate" styleClass="form-date" prefWidth="200" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Hora de Recogida:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <HBox spacing="5" alignment="CENTER_LEFT" GridPane.columnIndex="1" GridPane.rowIndex="2">
                        <Spinner fx:id="spinHour" styleClass="form-spinner" prefWidth="80" editable="true"/>
                        <Label text=":" styleClass="detail-label"/>
                        <Spinner fx:id="spinMinute" styleClass="form-spinner" prefWidth="80" editable="true"/>
                    </HBox>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Notes -->
            <VBox spacing="10" styleClass="detail-section" alignment="CENTER" maxWidth="700">
                <Label text="Notas" styleClass="section-title"/>
                <TextArea fx:id="txtNotes" promptText="Ingrese instrucciones especiales o notas..."
                          styleClass="notes-area" prefHeight="100" wrapText="true" prefWidth="600"/>
            </VBox>

            <Separator/>

            <!-- Cost Breakdown -->
            <VBox spacing="10" styleClass="detail-section" alignment="CENTER" maxWidth="700">
                <HBox alignment="CENTER" spacing="15">
                    <Label text="Desglose de Costos" styleClass="section-title"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Calcular Cotización" styleClass="btn-secondary" onAction="#handleCalculateQuote"/>
                    <Button text="Ver Desglose Detallado" styleClass="btn-secondary" onAction="#handleShowDetailedBreakdown"/>
                </HBox>
                <GridPane hgap="20" vgap="10" styleClass="detail-grid">
                    <columnConstraints>
                        <ColumnConstraints minWidth="150" prefWidth="150"/>
                        <ColumnConstraints minWidth="120" prefWidth="120"/>
                        <ColumnConstraints minWidth="150" prefWidth="150"/>
                        <ColumnConstraints minWidth="120" prefWidth="120"/>
                    </columnConstraints>

                    <Label text="Costo Base:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <Label fx:id="lblBaseCost" text="0" styleClass="detail-value" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Costo por Distancia:" styleClass="detail-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                    <Label fx:id="lblDistanceCost" text="0" styleClass="detail-value" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                    <Label text="Costo por Peso:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <Label fx:id="lblWeightCost" text="0" styleClass="detail-value" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Costo por Volumen:" styleClass="detail-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                    <Label fx:id="lblVolumeCost" text="0" styleClass="detail-value" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                    <Label text="Costo de Servicios:" styleClass="detail-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <Label fx:id="lblServicesCost" text="0" styleClass="detail-value" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                    <Label text="Costo Total:" styleClass="detail-label total-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                    <Label fx:id="lblTotalCost" text="0" styleClass="detail-value total-value" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                    <Label text="Entrega Estimada:" styleClass="detail-label" GridPane.columnIndex="2" GridPane.rowIndex="3"/>
                    <Label fx:id="lblEstimatedDelivery" text="--" styleClass="detail-value" GridPane.columnIndex="3" GridPane.rowIndex="3"/>
                </GridPane>
            </VBox>

        </VBox>
    </ScrollPane>

</VBox>
