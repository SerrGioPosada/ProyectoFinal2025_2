<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<ScrollPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="co.edu.uniquindio.poo.proyectofiinal2025_2.Controller.ChangePasswordController"
            fitToWidth="true" styleClass="content-area">

    <VBox spacing="20" alignment="TOP_CENTER" styleClass="content-area">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <!-- Back Button -->
        <HBox alignment="CENTER_LEFT">
            <Button text="â† Regresar" styleClass="btn-secondary"
                    onAction="#handleBack" prefWidth="120"/>
        </HBox>

        <!-- Header Section -->
        <HBox alignment="CENTER" spacing="15" styleClass="header-section">
            <Label text="Cambiar Contrasena" styleClass="page-title"/>
        </HBox>

        <!-- Password Change Form Card -->
        <VBox spacing="25" styleClass="profile-container" maxWidth="600" alignment="TOP_CENTER">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>

            <!-- Instructions -->
            <VBox spacing="5" alignment="CENTER">
                <Label text="Actualiza tu contrasena" styleClass="option-card-title"/>
                <Label text="Por tu seguridad, asegurate de usar una contrasena fuerte"
                       styleClass="option-card-description" wrapText="true"/>
            </VBox>

            <Separator/>

            <!-- Current Password -->
            <VBox spacing="8">
                <Label text="Contrasena Actual" styleClass="form-label"/>
                <PasswordField fx:id="txtCurrentPassword" promptText="Ingresa tu contrasena actual"
                              styleClass="form-input"/>
                <Label fx:id="lblCurrentPasswordError" styleClass="error-message" visible="false" managed="false"/>
            </VBox>

            <!-- New Password -->
            <VBox spacing="8">
                <Label text="Nueva Contrasena" styleClass="form-label"/>
                <PasswordField fx:id="txtNewPassword" promptText="Ingresa tu nueva contrasena"
                              styleClass="form-input"/>
                <Label fx:id="lblNewPasswordError" styleClass="error-message" visible="false" managed="false"/>

                <!-- Password Strength Indicator -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Seguridad:" styleClass="form-label-small"/>
                    <ProgressBar fx:id="passwordStrengthBar" prefWidth="150" progress="0" styleClass="progress-bar"/>
                    <Label fx:id="lblPasswordStrength" text="" styleClass="form-label-small"/>
                </HBox>
            </VBox>

            <!-- Confirm New Password -->
            <VBox spacing="8">
                <Label text="Confirmar Nueva Contrasena" styleClass="form-label"/>
                <PasswordField fx:id="txtConfirmPassword" promptText="Confirma tu nueva contrasena"
                              styleClass="form-input"/>
                <Label fx:id="lblConfirmPasswordError" styleClass="error-message" visible="false" managed="false"/>
            </VBox>

            <!-- Password Requirements -->
            <VBox spacing="5" styleClass="info-box">
                <Label text="Requisitos de contrasena:" styleClass="form-label-small" style="-fx-font-weight: bold;"/>
                <Label text="- Minimo 8 caracteres" styleClass="form-label-small"/>
                <Label text="- Al menos una letra mayuscula" styleClass="form-label-small"/>
                <Label text="- Al menos una letra minuscula" styleClass="form-label-small"/>
                <Label text="- Al menos un numero" styleClass="form-label-small"/>
            </VBox>

            <Separator/>

            <!-- Action Buttons -->
            <HBox spacing="15" alignment="CENTER">
                <Button text="Cancelar" styleClass="btn-secondary" onAction="#handleCancel" prefWidth="150"/>
                <Button text="Guardar Cambios" styleClass="btn-primary" onAction="#handleSave" prefWidth="200"/>
            </HBox>
        </VBox>
    </VBox>
</ScrollPane>
