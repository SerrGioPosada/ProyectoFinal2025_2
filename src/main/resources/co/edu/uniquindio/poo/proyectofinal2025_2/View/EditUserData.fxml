<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>

<ScrollPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="co.edu.uniquindio.poo.ProyectoFinal2025_2.Controller.EditUserDataController"
            fitToWidth="true" styleClass="content-area">

    <VBox spacing="20" alignment="TOP_CENTER" styleClass="content-area">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <!-- Back Button -->
        <HBox alignment="CENTER_LEFT">
            <Button text="← Regresar" styleClass="btn-secondary"
                    onAction="#handleBack" prefWidth="120"/>
        </HBox>

        <!-- Header Section -->
        <HBox alignment="CENTER" spacing="15" styleClass="header-section">
            <Label text="Editar Datos Personales" styleClass="page-title"/>
        </HBox>

        <!-- Edit User Data Form Card -->
        <VBox spacing="25" styleClass="profile-container" maxWidth="700" alignment="TOP_CENTER">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>

            <!-- Instructions -->
            <VBox spacing="5" alignment="CENTER">
                <Label text="Actualiza tu informacion personal" styleClass="option-card-title"/>
                <Label text="Modifica los datos de tu perfil y foto de usuario"
                       styleClass="option-card-description" wrapText="true"/>
            </VBox>

            <Separator/>

            <!-- Profile Photo Section -->
            <VBox spacing="15" alignment="CENTER">
                <Label text="Foto de Perfil" styleClass="form-label"/>
                <ImageView fx:id="imgProfilePreview" fitWidth="120" fitHeight="120"
                          preserveRatio="true" styleClass="profile-image-large"/>
                <HBox spacing="10" alignment="CENTER">
                    <Button text="Seleccionar Foto" styleClass="btn-secondary" onAction="#handleSelectPhoto"/>
                    <Button text="Eliminar Foto" styleClass="btn-secondary" onAction="#handleRemovePhoto"/>
                </HBox>
                <Label fx:id="lblPhotoName" text="" styleClass="form-label-small"/>
            </VBox>

            <Separator/>

            <!-- Personal Information Form -->
            <GridPane hgap="15" vgap="20" alignment="CENTER">
                <columnConstraints>
                    <ColumnConstraints percentWidth="50"/>
                    <ColumnConstraints percentWidth="50"/>
                </columnConstraints>

                <!-- First Name -->
                <VBox spacing="8" GridPane.columnIndex="0" GridPane.rowIndex="0">
                    <Label text="Nombre" styleClass="form-label"/>
                    <TextField fx:id="txtFirstName" promptText="Ingresa tu nombre"
                              styleClass="form-input"/>
                    <Label fx:id="lblFirstNameError" styleClass="error-message" visible="false" managed="false"/>
                </VBox>

                <!-- Last Name -->
                <VBox spacing="8" GridPane.columnIndex="1" GridPane.rowIndex="0">
                    <Label text="Apellido" styleClass="form-label"/>
                    <TextField fx:id="txtLastName" promptText="Ingresa tu apellido"
                              styleClass="form-input"/>
                    <Label fx:id="lblLastNameError" styleClass="error-message" visible="false" managed="false"/>
                </VBox>

                <!-- Email (Read-only) -->
                <VBox spacing="8" GridPane.columnIndex="0" GridPane.rowIndex="1">
                    <Label text="Email" styleClass="form-label"/>
                    <TextField fx:id="txtEmail" promptText="tu@email.com"
                              styleClass="form-input" editable="false" disable="true"/>
                    <Label text="El email no puede ser modificado" styleClass="form-label-small"/>
                </VBox>

                <!-- Phone -->
                <VBox spacing="8" GridPane.columnIndex="1" GridPane.rowIndex="1">
                    <Label text="Telefono" styleClass="form-label"/>
                    <TextField fx:id="txtPhone" promptText="Ingresa tu telefono"
                              styleClass="form-input"/>
                    <Label fx:id="lblPhoneError" styleClass="error-message" visible="false" managed="false"/>
                </VBox>

                <!-- User ID (Read-only) -->
                <VBox spacing="8" GridPane.columnIndex="0" GridPane.rowIndex="2">
                    <Label text="ID de Usuario (Sistema)" styleClass="form-label"/>
                    <TextField fx:id="txtId" promptText="ID"
                              styleClass="form-input" editable="false" disable="true"/>
                    <Label text="Identificador único en la aplicación" styleClass="form-label-small"/>
                </VBox>

                <!-- Date of Birth (Optional) -->
                <VBox spacing="8" GridPane.columnIndex="1" GridPane.rowIndex="2">
                    <Label text="Fecha de Nacimiento" styleClass="form-label"/>
                    <DatePicker fx:id="dateBirthDate" promptText="Selecciona tu fecha de nacimiento"
                               styleClass="form-input"/>
                </VBox>
            </GridPane>

            <!-- Additional Info -->
            <VBox spacing="8">
                <Label text="Informacion Adicional (Opcional)" styleClass="form-label"/>
                <TextArea fx:id="txtAdditionalInfo" promptText="Informacion adicional sobre ti"
                         styleClass="form-input" wrapText="true"
                         prefHeight="60" minHeight="60" maxHeight="200"/>
            </VBox>

            <Separator/>

            <!-- Action Buttons -->
            <HBox spacing="15" alignment="CENTER">
                <Button text="Cancelar" styleClass="btn-secondary" onAction="#handleCancel" prefWidth="150"/>
                <Button text="Guardar Cambios" styleClass="btn-primary" onAction="#handleSave" prefWidth="200"/>
            </HBox>
        </VBox>
    </VBox>
</ScrollPane>
