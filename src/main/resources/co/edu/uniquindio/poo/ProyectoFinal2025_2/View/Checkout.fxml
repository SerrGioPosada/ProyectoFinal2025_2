<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="co.edu.uniquindio.poo.ProyectoFinal2025_2.Controller.CheckoutController"
            prefHeight="700.0" prefWidth="900.0"
            styleClass="root-pane">

    <ScrollPane fitToWidth="true" fitToHeight="true"
                styleClass="details-scroll"
                AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">

        <VBox spacing="20" styleClass="details-container">
            <padding>
                <Insets top="30" right="40" bottom="30" left="40"/>
            </padding>

            <!-- Header -->
            <VBox spacing="5" styleClass="header-section">
                <Label text="Resumen de Orden" styleClass="section-title"/>
                <Label fx:id="lblOrderId" text="Orden #" styleClass="detail-value"/>
            </VBox>

            <Separator/>

            <!-- Addresses Section -->
            <VBox spacing="15" styleClass="detail-section">
                <Label text="Direcciones" styleClass="section-title"/>

                <GridPane styleClass="detail-grid">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="150" prefWidth="150"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>

                    <Label text="Origen:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <Label fx:id="lblOriginAddress" text="..." styleClass="detail-value" wrapText="true"
                           GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Destino:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <Label fx:id="lblDestinationAddress" text="..." styleClass="detail-value" wrapText="true"
                           GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Package Details Section -->
            <VBox spacing="15" styleClass="detail-section">
                <Label text="Detalles del Paquete" styleClass="section-title"/>

                <GridPane styleClass="detail-grid">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="150" prefWidth="150"/>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="150" prefWidth="200"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="150" prefWidth="150"/>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="150" prefWidth="200"/>
                    </columnConstraints>

                    <Label text="Peso:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <Label fx:id="lblWeight" text="0.00 kg" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Dimensiones:" styleClass="detail-label"
                           GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                    <Label fx:id="lblDimensions" text="0 x 0 x 0 cm" styleClass="detail-value"
                           GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                    <Label text="Volumen:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <Label fx:id="lblVolume" text="0.0000 m³" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Distancia:" styleClass="detail-label"
                           GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                    <Label fx:id="lblDistance" text="0.00 km" styleClass="detail-value"
                           GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Schedule Section -->
            <VBox spacing="15" styleClass="detail-section">
                <Label text="Programación" styleClass="section-title"/>

                <GridPane styleClass="detail-grid">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="150" prefWidth="180"/>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="150" prefWidth="200"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="150" prefWidth="180"/>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="150" prefWidth="200"/>
                    </columnConstraints>

                    <Label text="Fecha de Recogida:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <Label fx:id="lblPickupDate" text="--/--/---- --:--" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Entrega Estimada:" styleClass="detail-label"
                           GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                    <Label fx:id="lblEstimatedDelivery" text="--/--/---- --:--" styleClass="detail-value"
                           GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                    <Label text="Prioridad:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <Label fx:id="lblPriority" text="Nivel 0" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Additional Services Section -->
            <VBox spacing="15" styleClass="detail-section">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Servicios Adicionales" styleClass="section-title"/>
                    <Label fx:id="lblServicesCount" text="0 servicios" styleClass="badge-active"/>
                </HBox>

                <VBox fx:id="vboxServices" spacing="5">
                    <!-- Services will be added dynamically -->
                </VBox>
            </VBox>

            <Separator/>

            <!-- Cost Breakdown Section -->
            <VBox spacing="15" styleClass="detail-section">
                <Label text="Desglose de Costos" styleClass="section-title"/>

                <GridPane hgap="20" vgap="8">
                    <columnConstraints>
                        <ColumnConstraints hgrow="ALWAYS"/>
                        <ColumnConstraints hgrow="NEVER" minWidth="120"/>
                    </columnConstraints>

                    <Label text="Costo Base:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <Label fx:id="lblBaseCost" text="0" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Costo por Distancia:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <Label fx:id="lblDistanceCost" text="0" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Costo por Peso:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <Label fx:id="lblWeightCost" text="0" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                    <Label text="Costo por Volumen:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                    <Label fx:id="lblVolumeCost" text="0" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                    <Label text="Servicios Adicionales:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                    <Label fx:id="lblServicesCost" text="0" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="4"/>

                    <Label text="Costo por Prioridad:" styleClass="detail-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="5"/>
                    <Label fx:id="lblPriorityCost" text="0" styleClass="detail-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="5"/>

                    <Separator GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="6">
                        <GridPane.margin>
                            <Insets top="5" bottom="5"/>
                        </GridPane.margin>
                    </Separator>

                    <Label text="TOTAL:" styleClass="total-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="7"/>
                    <Label fx:id="lblTotalCost" text="0" styleClass="total-value"
                           GridPane.columnIndex="1" GridPane.rowIndex="7"/>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Notes Section -->
            <VBox spacing="15" styleClass="detail-section">
                <Label text="Notas Adicionales" styleClass="section-title"/>
                <TextArea fx:id="txtNotes" wrapText="true" editable="false"
                          prefRowCount="3" styleClass="notes-area"/>
            </VBox>

            <!-- Action Buttons -->
            <HBox spacing="15" alignment="CENTER_RIGHT">
                <padding>
                    <Insets top="20"/>
                </padding>

                <Button text="Cancelar" onAction="#handleCancel" styleClass="btn-secondary"
                        prefWidth="150" prefHeight="40"/>
                <Button text="Proceder al Pago" onAction="#handleProceedToPayment"
                        styleClass="btn-primary" prefWidth="180" prefHeight="40"/>
            </HBox>

        </VBox>
    </ScrollPane>

</AnchorPane>
